"use strict";
/**
* Name: HaziJs Select2
* Desc: A Simple and Lightweight JavScript Framework.
* version: 1.0.0
* Package: @HaziJs
* Author: https://github.com/golaphazi
* Developer: Hazi
*/
var $hJsSelect2={init:function(e=".hjs-select2"){let t,a,l=document.querySelectorAll(e);for(let i of l){let n=document.createElement("div"),r=document.createElement("div"),s=document.createElement("datalist");i.querySelectorAll("optgroup");let d=document.createElement("span");d.setAttribute("class","hjs-select2-display");let o=document.createElement("span");o.setAttribute("class","hjs-select2-input"),o.setAttribute("contenteditable",!0),d.appendChild(o);let u=i.options,c=i.parentElement,b=i.hasAttribute("multiple"),p=function(e){let t=this.hasAttribute("data-disabled"),l=n.querySelectorAll("select option"),i=this.dataset.value;this.dataset.label;let r=this.dataset.index;if(!t){if(b?l.forEach(e=>{let t=e.value?e.value:e.innerText;if(e.hasAttribute("tabindex")&&(t=e.getAttribute("tabindex"),i=r),t==i){let a=e.hasAttribute("selected");a?e.removeAttribute("selected"):e.setAttribute("selected","")}}):l.forEach(e=>{let t=e.value?e.value:e.innerText;e.hasAttribute("tabindex")&&(t=e.getAttribute("tabindex"),i=r),t==i?e.setAttribute("selected",""):e.removeAttribute("selected")}),b){if(e.shiftKey){let s=this.hasAttribute("data-checked");s?this.removeAttribute("data-checked"):this.setAttribute("data-checked","")}else{let d=this.hasAttribute("data-checked");d?this.removeAttribute("data-checked"):this.setAttribute("data-checked","")}}else{let u=n.querySelectorAll(".option");for(a=0;a<u.length;a++){let c=u[a];c.removeAttribute("data-checked")}this.setAttribute("data-checked","")}o.innerHTML="",f(),A()}},h=function(e){e.preventDefault(),e.stopPropagation(),13===e.keyCode&&this.click()},A=function(){let e=i.querySelectorAll("option[selected]");if(d.innerHTML="",e.length>0){let t=0;e.forEach(e=>{let a=e.hasAttribute("selected");if(a){let l=e.innerText.trim();if(""==l&&(l=e.value?e.value:""),e.hasAttribute("tabindex")){let r=e.getAttribute("tabindex"),s=n.querySelector('datalist div.option[data-index="'+r+'"]');if(s&&s.hasAttribute("data-label")){let o=s.getAttribute("data-label");""!=o.trim()&&(l=o)}}let u=document.createElement("span");u.innerText=l.trim(),u.tabIndex=e.getAttribute("tabindex"),u.setAttribute("data-value",e.value),u.addEventListener("click",function(e){e.preventDefault(),this.getAttribute("data-value");let t=this.getAttribute("tabindex"),a=n.querySelector('.option[data-index="'+t+'"]');a&&a.removeAttribute("data-checked");let l=i.querySelector('option[tabindex="'+t+'"]');l&&l.removeAttribute("selected"),this.remove(),n.setAttribute("data-open","");0==c.querySelectorAll("select option[selected]").length&&(d.innerText=i.title?i.title:"Select Item",f())}),d.append(u)}t++})}else d.innerText=i.title?i.title:"Select Item",f();d.appendChild(o)},f=function(){let e=s.querySelectorAll("div.option");if(e)for(let t=0;t<e.length;t++)e[t].style.display=""};for(t of(n.classList.add("hjs-select2-wrap"),r.classList.add("nextheader-wrap"),n.tabIndex=1,i.tabIndex=-1,d.innerText=i.title?i.title:"Select Item",r.appendChild(d),i.attributes));let v=c.querySelectorAll("select > *");if(v.length>0){let x=0;v.forEach(e=>{let a=e.hasAttribute("disabled"),l=e.hasAttribute("selected"),i=e.querySelectorAll("option");if(i.length>0){let n=document.createElement("div"),r=document.createElement("div");r.classList.add("label"),r.innerText=e.label,n.appendChild(r),i.forEach(e=>{let a=document.createElement("div"),l=document.createElement("div"),i=e,r=e.hasAttribute("disabled"),s=e.hasAttribute("selected");for(t of(r&&a.setAttribute("data-disabled",""),s&&a.setAttribute("data-checked",""),i.attributes));if(a.classList.add("option"),a.classList.add("optgroup-item"),l.classList.add("label"),l.innerText=i.label,a.dataset.value=i.value,a.dataset.label=i.label,a.dataset.index=x,!i.hasAttribute("value")){let d=i.value?i.value:i.innerText;i.setAttribute("value",d)}e.setAttribute("tabindex",x),a.onclick=p,a.onkeyup=h,a.appendChild(l),n.appendChild(a),x++}),n.classList.add("optgroup"),s.appendChild(n)}else{let d=document.createElement("div"),o=document.createElement("div"),u=e;for(t of(a&&d.setAttribute("data-disabled",""),l&&d.setAttribute("data-checked",""),u.attributes));if(d.classList.add("option"),o.classList.add("label"),o.innerText=u.label,d.dataset.value=u.value,d.dataset.label=u.label,d.dataset.index=x,!u.hasAttribute("value")){let c=u.value?u.value:u.innerText;u.setAttribute("value",c)}e.setAttribute("tabindex",x),d.onclick=p,d.onkeyup=h,d.appendChild(o),s.appendChild(d)}x++})}n.appendChild(r),n.onclick=function(e){e.preventDefault()},c.insertBefore(n,i),r.appendChild(i),n.appendChild(s),s.style.top="auto",n.onclick=function(e){if(b){let t=this.hasAttribute("data-open");e.stopPropagation(),t?this.removeAttribute("data-open"):this.setAttribute("data-open","")}else{let a=this.hasAttribute("data-open");e.stopPropagation(),a?this.removeAttribute("data-open"):this.setAttribute("data-open","")}},n.onkeyup=function(e){e.preventDefault(),13===e.keyCode&&this.click()},o.onkeyup=function(e){e.preventDefault(),n.setAttribute("data-open","");let t=this.innerText.toUpperCase(),a=s.querySelectorAll("div.option");if(a)for(let l=0;l<a.length;l++){let i=a[l].querySelectorAll("*");if(i){let r="";i.forEach(function(e){r+=e.textContent||e.innerText+" "}),r.toUpperCase().indexOf(t)>-1?a[l].style.display="":a[l].style.display="none"}}},document.addEventListener("click",function(e){n.hasAttribute("data-open")&&n.removeAttribute("data-open")});let m=Math.max(...Array.from(u).map(function(e){return n.offsetWidth}));n.style.minWidth=m+"px";c.querySelectorAll("select option[selected]").length>0&&A()}}};