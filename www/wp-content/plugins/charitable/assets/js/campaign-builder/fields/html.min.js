var CharitableCampaignBuilderFieldHTML=window.CharitableCampaignBuilderFieldHTML||function(e,i,$){var t=!1,r=[],d={settings:{},init:function(){wpchar.debug("init","field-html-js");charitable_panel_switch=!0,s=this.settings,$(d.ready),$(i).on("load",(function(){"function"==typeof $.ready.then?$.ready.then(d.load):d.load()}))},ready:function(){wpchar.debug("ready","field-html-js"),$("#charitable-builder").on("charitableFieldEdit",(function(e,i,t,l,a,n){"html"===n&&(""==l&&""!==a&&(l=a),parseInt(l)>0&&-1===r.indexOf(l)&&(wpchar.debug("init a codemirror at "+l,"field-html-js"),d.codemirrorInit(l)))}))},codemirrorInit(e){var i=wp.codeEditor.defaultSettings?_.clone(wp.codeEditor.defaultSettings):{},d=$("#charitable-panel-field-settings-field_html_html_"+e);wpchar.debug("field_object","field-html-js"),wpchar.debug(d,"field-html-js"),d.parent().find(".CodeMirror").length>0?wpchar.debug("already codemirror"):(i.codemirror=_.extend({},i.codemirror,{lineNumbers:!0,indentUnit:2,tabSize:2}),wpchar.debug("charitable_codemirror_init","field-html-js"),wpchar.debug($("#charitable-panel-field-settings-field_html_html_"+e),"field-html-js"),wpchar.debug(e,"field-html-js"),d.css("visibility","hidden"),setTimeout((function(){t=wp.codeEditor.initialize(d),d.css("visibility","visible")}),500),-1===r.indexOf(e)?r.push(e):console.log("This item already exists"),wpchar.debug(r,"field-html-js"),$("#charitable-builder").on("keyup",".CodeMirror-code",(function(){t.codemirror.save();var i=$("#charitable-panel-field-settings-field_html_html_"+e);i.trigger("change"),wpchar.debug($(this),"field-html-js"),wpchar.debug(i,"field-html-js"),wpchar.debug(t.codemirror.getValue(),"field-html-js")})))}};return d}(document,window,jQuery);CharitableCampaignBuilderFieldHTML.init();