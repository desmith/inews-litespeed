!function($){$.fn.ddslick=function(d){return e[d]?e[d].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof d&&d?void $.error("Method "+d+" does not exists."):e.init.apply(this,arguments)};var e={},d={data:[],keepJSONItemsOnTop:!1,width:260,height:null,background:"#eee",selectText:"",defaultSelectedIndex:null,truncateDescription:!0,imagePosition:"left",showSelectedHTML:!0,clickOffToClose:!0,embedCSS:!0,onSelected:function(){}};function t(e,d){var t=e.data("ddslick"),i=e.find(".dd-selected"),o=i.siblings(".dd-selected-value"),s=(e.find(".dd-options"),i.siblings(".dd-pointer"),e.find(".dd-option").eq(d)),l=s.closest("li"),a=t.settings,c=t.settings.data[d];e.find(".dd-option").removeClass("dd-option-selected"),s.addClass("dd-option-selected"),t.selectedIndex=d,t.selectedItem=l,t.selectedData=c,a.showSelectedHTML?i.html((c.imageSrc?'<img class="dd-selected-image'+("right"==a.imagePosition?" dd-image-right":"")+'" src="'+c.imageSrc+'" />':"")+(c.text?'<label class="dd-selected-text">'+c.text+"</label>":"")+(c.description?'<small class="dd-selected-description dd-desc'+(a.truncateDescription?" dd-selected-description-truncated":"")+'" >'+c.description+"</small>":"")):i.html(c.text),o.val(c.value),t.original.val(c.value),e.data("ddslick",t),n(e),function(e){var d=e.find(".dd-select").css("height"),t=e.find(".dd-selected-description"),i=e.find(".dd-selected-image");t.length<=0&&i.length>0&&e.find(".dd-selected-text").css("lineHeight",d)}(e),"function"==typeof a.onSelected&&a.onSelected.call(this,t)}function i(e){var d=e.find(".dd-select"),t=d.siblings(".dd-options"),i=d.find(".dd-pointer"),n=t.is(":visible");$(".dd-click-off-close").not(t).slideUp(50),$(".dd-pointer").removeClass("dd-pointer-up"),d.removeClass("dd-open"),n?(t.slideUp("fast"),i.removeClass("dd-pointer-up"),d.removeClass("dd-open")):(d.addClass("dd-open"),t.slideDown("fast"),i.addClass("dd-pointer-up")),function(e){e.find(".dd-option").each((function(){var d=$(this),t=d.css("height"),i=d.find(".dd-option-description"),n=e.find(".dd-option-image");i.length<=0&&n.length>0&&d.find(".dd-option-text").css("lineHeight",t)}))}(e)}function n(e){e.find(".dd-select").removeClass("dd-open"),e.find(".dd-options").slideUp(50),e.find(".dd-pointer").removeClass("dd-pointer-up").removeClass("dd-pointer-up")}e.init=function(e){var n=$.extend({},d,e);return $("#css-ddslick").length<=0&&n.embedCSS&&$('<style id="css-ddslick" type="text/css">.dd-select{ border-radius:2px; border:solid 1px #ccc; position:relative; cursor:pointer;}.dd-desc { color:#aaa; display:block; overflow: hidden; font-weight:normal; line-height: 1.4em; }.dd-selected{ overflow:hidden; display:block; padding:10px; font-weight:bold;}.dd-pointer{ width:0; height:0; position:absolute; right:10px; top:50%; margin-top:-3px;}.dd-pointer-down{ border:solid 5px transparent; border-top:solid 5px #000; }.dd-pointer-up{border:solid 5px transparent !important; border-bottom:solid 5px #000 !important; margin-top:-8px;}.dd-options{ border:solid 1px #ccc; border-top:none; list-style:none; box-shadow:0px 1px 5px #ddd; display:none; position:absolute; z-index:2000; margin:0; padding:0;background:#fff; overflow:auto;}.dd-option{ padding:10px; display:block; border-bottom:solid 1px #ddd; overflow:hidden; text-decoration:none; color:#333; cursor:pointer;-webkit-transition: all 0.25s ease-in-out; -moz-transition: all 0.25s ease-in-out;-o-transition: all 0.25s ease-in-out;-ms-transition: all 0.25s ease-in-out; }.dd-options > li:last-child > .dd-option{ border-bottom:none;}.dd-option:hover{ background:#f3f3f3; color:#000;}.dd-selected-description-truncated { text-overflow: ellipsis; white-space:nowrap; }.dd-option-selected { background:#f6f6f6; }.dd-option-image, .dd-selected-image { vertical-align:middle; float:left; margin-right:5px; max-width:64px;}.dd-image-right { float:right; margin-right:15px; margin-left:5px;}.dd-container{ position:relative;}​ .dd-selected-text { font-weight:bold}​</style>').appendTo("head"),this.each((function(){var n=$.extend({},d,e),o=$(this);if(!o.data("ddslick")){var s=[];n.data;o.find("option").each((function(){var e=$(this),d=e.data();s.push({text:$.trim(e.text()),value:e.val(),selected:e.is(":selected"),description:d.description,imageSrc:d.imagesrc})})),n.keepJSONItemsOnTop?$.merge(n.data,s):n.data=$.merge(s,n.data);var l=o,a=$("<div").attr("id",o.attr("id")+"-dd-placeholder");o.replaceWith(a),(o=a).addClass("dd-container").append('<div class="dd-select"><input class="dd-selected-value" type="hidden" /><a class="dd-selected"></a><span class="dd-pointer dd-pointer-down"></span></div>').append('<ul class="dd-options"></ul>'),o.find("input.dd-selected-value").attr("id",$(l).attr("id")).attr("name",$(l).attr("name"));s=o.find(".dd-select");var c=o.find(".dd-options");c.css({width:n.width}),s.css({width:n.width,background:n.background}),o.css({width:n.width}),null!=n.height&&c.css({height:n.height,overflow:"auto"}),$.each(n.data,(function(e,d){d.selected&&(n.defaultSelectedIndex=e),c.append('<li><a class="dd-option">'+(d.value?' <input class="dd-option-value" type="hidden" value="'+d.value+'" />':"")+(d.imageSrc?' <img class="dd-option-image'+("right"==n.imagePosition?" dd-image-right":"")+'" src="'+d.imageSrc+'" />':"")+(d.text?' <label class="dd-option-text">'+d.text+"</label>":"")+(d.description?' <small class="dd-option-description dd-desc">'+d.description+"</small>":"")+"</a></li>")}));var r={settings:n,original:l,selectedIndex:-1,selectedItem:null,selectedData:null};if(o.data("ddslick",r),n.selectText.length>0&&null==n.defaultSelectedIndex)o.find(".dd-selected").html(n.selectText);else{var p=null!=n.defaultSelectedIndex&&n.defaultSelectedIndex>=0&&n.defaultSelectedIndex<n.data.length?n.defaultSelectedIndex:0;t(o,p)}o.find(".dd-select").on("click.ddslick",(function(){i(o)})),o.find(".dd-option").on("click.ddslick",(function(){t(o,$(this).closest("li").index())})),n.clickOffToClose&&(c.addClass("dd-click-off-close"),o.on("click.ddslick",(function(e){e.stopPropagation()})),$("body").on("click",(function(){$(".dd-open").removeClass("dd-open"),$(".dd-click-off-close").slideUp(50).siblings(".dd-select").find(".dd-pointer").removeClass("dd-pointer-up")})))}}))},e.select=function(e){return this.each((function(){var d,i,n;void 0!==e.index&&t($(this),e.index),e.id&&(d=$(this),i=e.id,n=d.find(".dd-option-value[value= '"+i+"']").parents("li").prevAll().length,t(d,n))}))},e.open=function(){return this.each((function(){var e=$(this);e.data("ddslick")&&i(e)}))},e.close=function(){return this.each((function(){var e=$(this);e.data("ddslick")&&n(e)}))},e.destroy=function(){return this.each((function(){var e=$(this),d=e.data("ddslick");if(d){var t=d.original;e.removeData("ddslick").unbind(".ddslick").replaceWith(t)}}))}}(jQuery);